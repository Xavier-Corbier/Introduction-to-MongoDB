# **Session 1 - Partie 3 : Concepts fondamentaux (Documents, Collections, BSON)**  

---

## **ğŸ¯ Objectifs pÃ©dagogiques**  

Ã€ la fin de cette session, vous serez capable de :  
âœ… Comprendre la structure des bases de donnÃ©es dans MongoDB.  
âœ… DiffÃ©rencier les concepts de **base de donnÃ©es, collection et document**.  
âœ… Expliquer le format **BSON** et son rÃ´le dans MongoDB.  
âœ… Manipuler des documents et collections via MongoDB Shell et Compass.  

---

## **ğŸ“š Contenu du cours**  

## **1ï¸âƒ£ Structure des donnÃ©es dans MongoDB**  

MongoDB est une base de donnÃ©es **orientÃ©e documents**, oÃ¹ les donnÃ©es sont stockÃ©es sous forme de **documents BSON** au sein de **collections**.  

ğŸ”¹ **Base de donnÃ©es** : Contient plusieurs collections (Ã©quivalent Ã  une base SQL).  
ğŸ”¹ **Collection** : Regroupe plusieurs documents (Ã©quivalent Ã  une table SQL).  
ğŸ”¹ **Document** : Un objet JSON/BSON stockÃ© dans une collection (Ã©quivalent Ã  une ligne SQL).  

### **Comparaison SQL vs MongoDB**  

| SQL | MongoDB |
|-----|---------|
| Base de donnÃ©es | Base de donnÃ©es |
| Table | Collection |
| Ligne | Document |
| Colonne | ClÃ©-valeur dans un document |
| `INSERT INTO` | `insertOne()` ou `insertMany()` |
| `SELECT * FROM` | `find()` |
| `UPDATE` | `updateOne()` ou `updateMany()` |
| `DELETE FROM` | `deleteOne()` ou `deleteMany()` |

---

## **2ï¸âƒ£ Documents MongoDB et format BSON**  

### **ğŸ”¹ Quâ€™est-ce quâ€™un document MongoDB ?**  
Un document est une **structure JSON** flexible permettant de stocker des donnÃ©es sous forme de **paires clÃ©-valeur**.  

Exemple dâ€™un document MongoDB :  
```json
{
  "_id": ObjectId("602d2149e773f2a3990b47f5"),
  "nom": "Alice Dupont",
  "email": "alice.dupont@email.com",
  "age": 29,
  "inscription": { "date": "2023-05-10", "premium": true }
}
```
ğŸ”¹ **CaractÃ©ristiques** :  
âœ… Chaque document est **unique** grÃ¢ce Ã  lâ€™`_id` (gÃ©nÃ©rÃ© automatiquement si non spÃ©cifiÃ©).  
âœ… Les documents sont **dynamiques** (pas de schÃ©ma fixe).  
âœ… Les valeurs peuvent Ãªtre **imbriquÃ©es** (`inscription` est un sous-document).  

### **ğŸ”¹ Quâ€™est-ce que BSON ?**  
MongoDB stocke les documents en **BSON** (Binary JSON), qui est :  
- **Plus efficace** que JSON en stockage et traitement.  
- **OptimisÃ©** pour la recherche et lâ€™indexation.  
- **Supporte des types supplÃ©mentaires** comme `Date`, `ObjectId`, `Decimal128`, etc.  

Exemple dâ€™un document BSON (reprÃ©sentation en JSON) :  
```json
{
  "_id": ObjectId("602d2149e773f2a3990b47f5"),
  "nom": "Alice Dupont",
  "age": NumberInt(29),
  "dateNaissance": ISODate("1994-03-15T00:00:00Z")
}
```
ğŸ“Œ **Remarque** :  
- `ObjectId()` est une clÃ© unique gÃ©nÃ©rÃ©e par MongoDB.  
- `ISODate()` permet de stocker des dates normalisÃ©es.  

---

## **3ï¸âƒ£ Manipulation des bases et collections**  

### **ğŸ”¹ CrÃ©ation dâ€™une base et dâ€™une collection**  
ğŸ“Œ Une base de donnÃ©es est crÃ©Ã©e **automatiquement** lorsquâ€™un premier document y est insÃ©rÃ©.  

```sh
use boutique  # SÃ©lectionne (ou crÃ©e) la base "boutique"
db.createCollection("produits")  # CrÃ©e une collection "produits"
```

### **ğŸ”¹ Afficher les bases et collections existantes**  
```sh
show dbs        # Liste toutes les bases de donnÃ©es
show collections  # Liste les collections d'une base sÃ©lectionnÃ©e
```

### **ğŸ”¹ Supprimer une base ou une collection**  
```sh
db.dropDatabase()  # Supprime la base sÃ©lectionnÃ©e
db.produits.drop()  # Supprime la collection "produits"
```

---

## **4ï¸âƒ£ Manipulation des documents**  

### **ğŸ”¹ InsÃ©rer un document dans une collection**  
```sh
db.utilisateurs.insertOne({
  "nom": "Alice Dupont",
  "email": "alice.dupont@email.com",
  "age": 29,
  "inscription": { "date": "2023-05-10", "premium": true }
})
```

### **ğŸ”¹ InsÃ©rer plusieurs documents**  
```sh
db.utilisateurs.insertMany([
  { "nom": "Bob Martin", "email": "bob@email.com", "age": 34 },
  { "nom": "Claire Durand", "email": "claire@email.com", "age": 27 }
])
```

### **ğŸ”¹ Lire les documents**  
```sh
db.utilisateurs.find()  # Affiche tous les documents
db.utilisateurs.find().pretty()  # Affiche avec un formatage lisible
```

### **ğŸ”¹ Trouver un document spÃ©cifique**  
```sh
db.utilisateurs.findOne({ "nom": "Alice Dupont" })
```

### **ğŸ”¹ Mettre Ã  jour un document**  
```sh
db.utilisateurs.updateOne(
  { "nom": "Alice Dupont" }, 
  { $set: { "age": 30 } }
)
```

### **ğŸ”¹ Supprimer un document**  
```sh
db.utilisateurs.deleteOne({ "nom": "Bob Martin" })
```

---

## **5ï¸âƒ£ Exploration des donnÃ©es avec MongoDB Compass**  

### **ğŸ”¹ Connexion Ã  MongoDB Compass**  
1ï¸âƒ£ Ouvrir **MongoDB Compass**.  
2ï¸âƒ£ Entrer lâ€™URI de connexion :  
   ```
   mongodb://localhost:27017
   ```
3ï¸âƒ£ Naviguer entre les bases et collections.  
4ï¸âƒ£ Ajouter, modifier et supprimer des documents via lâ€™interface.  

### **ğŸ”¹ ExÃ©cuter des requÃªtes graphiquement**  
- SÃ©lectionner une **base de donnÃ©es**.  
- Cliquer sur une **collection** et voir les documents.  
- Utiliser lâ€™onglet **FILTER** pour rechercher des donnÃ©es (`{ "age": { "$gt": 25 } }`).  
- InsÃ©rer un **nouveau document** via lâ€™interface.  

---

## **6ï¸âƒ£ Introduction aux types de donnÃ©es dans MongoDB**  

MongoDB supporte diffÃ©rents types de donnÃ©es, parmi lesquels :  

| Type | Description | Exemple |
|------|------------|---------|
| String | ChaÃ®ne de texte | `"nom": "Alice"` |
| NumberInt | Entier | `"age": NumberInt(29)` |
| NumberDouble | Nombre flottant | `"prix": 19.99` |
| Boolean | Vrai / Faux | `"premium": true` |
| Date | Format de date | `"dateNaissance": ISODate("1994-03-15T00:00:00Z")` |
| Array | Tableau de valeurs | `"tags": ["promotion", "nouveau"]` |
| Object | Document imbriquÃ© | `"adresse": { "ville": "Paris", "code": 75001 }` |

---

## **ğŸ› ï¸ ActivitÃ©s pratiques**  

### **Exercice 1 : CrÃ©ation et manipulation dâ€™une base**  
ğŸ“Œ **Objectif** : Manipuler une base MongoDB en ajoutant et consultant des documents.  

1ï¸âƒ£ CrÃ©er une base `ecommerce`.  
2ï¸âƒ£ Ajouter une collection `produits`.  
3ï¸âƒ£ InsÃ©rer trois documents reprÃ©sentant des produits (nom, prix, catÃ©gorie, stock).  
4ï¸âƒ£ Rechercher un produit spÃ©cifique (`findOne()`).  
5ï¸âƒ£ Mettre Ã  jour un produit (`updateOne()`).  
6ï¸âƒ£ Supprimer un produit (`deleteOne()`).  

---

## **ğŸ“– Questions de rÃ©vision**  

âœ” Quelle est la diffÃ©rence entre une base, une collection et un document en MongoDB ?  
âœ” Quâ€™est-ce que BSON et pourquoi est-il utilisÃ© ?  
âœ” Comment insÃ©rer, modifier et supprimer des documents ?  
âœ” Quels sont les avantages dâ€™un stockage sans schÃ©ma strict ?  
